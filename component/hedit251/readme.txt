***************************************************************************
正式名          正規表現を使った文字列探索/操作コンポーネント集ver0.17
バージョン      0.17
配布ファイル名  REXP017.LZH
日付            2001/09/15
動作確認環境    Windows 98 + Borland Delphi6 Japanese Personal edition
作者            峯島 bmonkey 雄治    mail    ggb01164@nifty.ne.jp
                                     WWW     http://homepage1.nifty.com/bmonkey/
***************************************************************************

◆  変更履歴
◆  概要
◆  ファイル一覧
◆  インストール方法
◆  アンインストール方法
◆  ヘルプシステムへの組み込み方法
◆  サンプル・プロジェクト
◆  注意
◆  参考文献


◆ 変更履歴
    ●2001/09/15  version 0.17
      バグ修正のみ
      ・MP3の魔術師さんに教えて頂いたメモリリークの修正を適用。
      ・おかぽんさんに教えて頂いたメモリリークの修正を適用。
      詳細は同梱のchangelog.htmlを見てください。

    ●1998/03/07  version 0.16  
    ・TGrepで英大文字/小文字が正しく検索できなかったバグを修正。
    ・漢字のキャラクタクラス指定([亜-熙]など)のバグを修正。
    ・Delphi3, C++Builder1に対応
        ・ユニットファイル名をRegExp.pasからbmRegExp.pasに変更
        ・コンパイラの厳しくなった型チェックに対応
        ・MBUtils.pasを使わないように変更。

    ●version 0.15
    ・ヘルプファイルを追加。

    ・RegExp.pasユニットの中で定義されている型の名づけ方を変えました。
      内部的に使用するクラスにはTREが先頭につきます。
      その他の型はREが先頭につきます。

    ・正規表現に同一視する文字や同意語の埋め込みをするためのプロパティと
      メソッドが加わりました。

    ・IgnoreCaseプロパティを削除しました。

    ・AcceptDBMetaプロパティを削除しました。

◆  概要
    ・bmRegExp.pasユニットファイルにはTGrep, TAWKStrの２つのコンポーネント
      が入っています。
    
    ・TGrepコンポーネントは指定された正規表現にマッチするテキストファイル
      中の行を見つけ、指定されたイベントハンドラを呼び出します。
    
    ・TAWKStrコンポーネントはプログラミング言語ＡＷＫに実装されている文字
      列操作関数の中で正規表現を使うものを提供します。
          match ：  文字列のパターンマッチ, 
          sub   ：  文字列の置換 (Substitude)
          gsub  ：  文字列の置換 (Global Substitute)
          split ：  文字列の分割

    ・UNIXオペレーティングシステムの egrep や awk コマンドで使われている正
      規表現が使えます。

    ・日本語(Shift JIS)に対応しており、２バイト文字を１文字として認識し、
      正規表現の中でも使う事が出来ます。

◆  ファイル一覧
    README.TXT    - このファイル
    bmREGEXP.PAS  - コンポーネントのソースファイル
    bmREGEXP.DCR  - コンポーネント・リソースファイル
    bmREGEXP.HLP  - ヘルプファイル
    bmREGEXP.CNT  - ヘルプコンテンツファイル
    bmREGEXP.KWF  - Delphi2用ヘルプファイルのキーワードファイル
    SAMPLES.LZH   - サンプル・プロジェクト
    changelog.html - 変更履歴

◆  インストール方法
    通常の方法でインストールしてください。
    C++Builderでは、ライブラリの検索パスにbmRegExp.pasのあるディレクトリを
    指定してください。

    以下は、Delphi2でのインストール方法です。

    １  bmRegExp.pas と bmRegExp.dcrを同じディレクトリに置く。
        ※bmRegExp.dcrには、コンポーネントパレット上で表示されるビットマッ
          プが入っていて、コンポーネント・インストール時に、Delphiが自動的
          に読み込みます。

    ２  Delphiのメインメニューから 
          [コンポーネント(C)] | [インストール(I)...]
        を選択する。

    ３  [コンポーネントのインストール]ダイアログが表示される。そこで
          [追加(A)]ボタン
        を押す。

    ４  [モジュールの追加]ダイアログが表示される。ここで、bmRegExp.pasにパ
        スを付けて指定するか、[参照(B)]ボタンを押して、ダイアログ内でディ
        レクトリ・ツリーをたどって、bmRegExp.pasを指定する。

    ５  [コンポーネントのインストール]ダイアログで[OK]ボタンを押せば、
        ライブラリのコンパイルが始まる。

    ６  コンパイルが終わると、Delphiのコンポーネント・パレットに[RegExp]
        ページが出来て、その中にTGrep, TAWKStrコンポーネントがインストール
        されている。
    
    ※  コンポーネント・パレットの別のページにインストールしたいときは、
        インストール作業の前に、bmRegExp.pasユニットファイルの終わりにある
        Register手続きを以下のように変更してください。
        例    [Samples]ページにインストールする。
          procedure Register;
          begin
            RegisterComponents('RegExp', [TGrep, TAWKStr]);
          end;
        
            ↓
          procedure Register;
          begin
            RegisterComponents('Samples', [TGrep, TAWKStr]);
            {                   ^^^^^^^ ここを希望のページ名に変更}
          end;

◆  アンインストール方法
    通常の方法でアンインストールしてください。
    以下は、Delphi2でのアンインストール方法です。

    １  Delphiのメインメニューから 
          [コンポーネント(C)] | [インストール(I)...]
        を選択する。

    ２  [コンポーネントのインストール]ダイアログが表示される。ダイアログ
        の左下にある[インストールされたユニット(I)]ウィンドウで bmRegExp
        を探し、選択状態にする。

    ３  [削除(R)]ボタンを押してから、[OK]ボタンを押すと、ライブラリのコン
        パイルが始まる。

    ４  コンパイルが終われば削除完了。

    ※ コンポーネント・パレット上のいらなくなったページは、
       Delphiのメインメニュー から 
        [コンポーネント(C)] ｜ [パレットの設定(P)...]
      で表示されるダイアログで、削除できます。

◆  ヘルプシステムへの組み込み方法

    ●C++Builder1
    １  bmRegExp.HLP, bmRegExp.CNTをC++Builderがインストールされているディ
        レクトリ下のHelpディレクトリに移動してください。

    ２  [C++Builderｲﾝｽﾄｰﾙﾃﾞｨﾚｸﾄﾘ]\Common Files\OpenHelp\OpenHelp.exeを起動
        します。

    ３  [使用可能なﾍﾙﾌﾟﾌｧｲﾙ]-[追加]でbmRegExp.HLPを指定してください。

    ４  [使用可能なﾍﾙﾌﾟﾌｧｲﾙ]のリスト中でbmRegExp.HLPを選択し、[＞]ボタン
        で[選択されているﾍﾙﾌﾟﾌｧｲﾙ]のリストに移動させます。

    ５  [ＯＫ]ボタンを押して終了です｡

    ６  C++Builder IDEのコンポーネントパレットでTGrepまたはTAWKStrコンポー
        ネントを選択してから F1キーを押して、コンポーネントヘルプが表示さ
        れればインストール完了です。 ヘルプファイルが見つからないと言って
        きたときは、自分でbmRegExp.HLPを指定してください。

    ●Delphi2
    この方法は、通常の方法でDelphiをインストールしたときのディレクトリ構成
    を前提としています。

    １  bmRegExp.HLP, bmRegExp.CNT, bmRegExp.KWFをDelphiがインストールされ
        ているディレクトリ下のHelpディレクトリに移動してください。
        
    ２  HelpInst.extを起動する。※Help\Toolsディレクトリにあります。

    ３  [ファイル]-[開く] でbin\Delphi.HDXを指定してください。

    ４  [オプション]-[検索パス]で、<ﾃﾞﾙﾌｧｲﾃﾞｨﾚｸﾄﾘ>\Helpを指定してください。
        例    c:\Delphi\Help

    ５  [キーワード]-[ファイルの追加]で、bmRegExp.kwfを指定してください。

    ６  [ファイル]-[上書き保存]を実行してください。

    ７  Delphi IDEのコンポーネントパレットでTGrepまたはTAWKStrコンポーネン
        トを選択してから F1キーを押して、コンポーネントヘルプが表示されれ
        ばインストール完了です。 ヘルプファイルが見つからないと言ってきたと
        きは、自分でbmRegExp.HLPを指定してください。

    ●Delphi3
    この方法は、通常の方法でDelphiをインストールしたときのディレクトリ構成
    を前提としています。

    １  bmRegExp.HLP, bmRegExp.CNTをDelphiがインストールされているディレク
        トリ下のHelpディレクトリに移動してください。
        
    ２  HelpディレクトリにあるDelphi3.CFG中のThird-party Help部に
        :Link bmRegExp.hlp
        を追加します。

    ３  HelpディレクトリにあるDelphi3.GIDを削除します。
        ※ *.GIDファイルは、WinHelpによって*.CNTファイルから自動生成されます。

    ４  Delphi IDEのコンポーネントパレットでTGrepまたはTAWKStrコンポーネン
        トを選択してから F1キーを押して、コンポーネントヘルプが表示されれ
        ばインストール完了です。 ヘルプファイルが見つからないと言ってきたと
        きは、自分でbmRegExp.HLPを指定してください。
        ※[ﾍﾙﾌﾟ] - [ｷｰﾜｰﾄﾞ検索] のダイアログでは検索できないみたいです。
          なにか知っている方は教えてください。

◆  サンプル・プロジェクト
    同梱ファイルのSAMPLES.LZHには、サンプルプロジェクトが入っています。
    「◆  インストール方法」にしたがってコンポーネントをインストール後、使
    用してください。

    Analyze\    正規表現文字列をＤＦＡ状態表に変換する過程を、各段階のデー
                タ構造を示すことによって表現するプロジェクトです。
                ※注意  コンパイル条件指定で DEBUGと指定してください。

    AWKTest\    TAWKStrコンポーネントの機能テストをするプロジェクトです。

    GREPtest\   TGREPコンポーネントを使った、ファイル検索をするプロジェク
                トです。 

    PreProc\    同意語辞書の機能テストプロジェクトです。

◆  注意
    ●著作権
        REXP017.LZHに含まれるすべてのファイルについて著作権は主張はしませ
        ん。
        REXP017.LZHに含まれるすべてのファイルについてご自分が作成したかの
        ように扱っていただいて結構です。
        例
            * プログラム（フリーウェア・シェアウェア・商用など、なんでも）
              にこのコンポーネントを使って配布する。
            * 手を加えてコンポーネントとして配布
            * ヘルプ、コンポーネントビットマップなどを再利用

    ●配布
        転載や配布は許可なしに行ってかまいません。

    ●連絡先
        バグ、要望、質問などの連絡は、電子メールでお願いします。
        バグ報告ではバグが発生する状況を単に羅列していただくだけでも結構です。

        bmonkey
        mail       ggb01164@nifty.ne.jp
        WWW        http://member.nifty.ne.jp/bmonkey

    ●免責
        私はこのソフトウェアの使用によって引き起こされた損害の責任は一切負
        いません。

    ●今後
        このコンポーネント集(ver0.17)の開発は現在終了しています。今後はバ
        グ修正のみをする予定です｡
        現在、新版(インターフェイスを大幅に変更。マッチ関数をグローバル関
        数で提供、複数の文字コード対応など)をホームページで試験公開してい
        ます。要望などはこちらに取り込んでゆくつもりです。

◆  参考文献
※１
書名    「Ｃプログラマのためのアルゴリズムとデータ構造 Ｐａｒｔ２」
著者    近藤 嘉雪
出版社  ソフトバンク
        ISBN4-89052-471-1
備考    正規表現を扱うためのアルゴリズムは、この本の第２部 ４章 「正規表現」
        の内容およびサンプルプログラムに拠っています。


※２
書名    「プログラミング言語ＡＷＫ」
著者    A.V.ｴｲﾎ / B.W.ｶｰﾆﾊﾝ / P.J.ﾜｲﾝﾊﾞｰｶﾞｰ 
翻訳者  足立高徳
出版社  トッパン
        ISBN4-8101-8008-5
備考    TAWKStrクラスが提供するメソッドの仕様はこの本に載っているものに従い
        ました。


※３
書名    Ｃ ＭＡＧＡＺＩＮ １９９３年 ３月号 「特集 正規表現のすすめ」
備考    ＵＮＩＸオペレーティングシステムのgrep, egrep コマンドでサポートさ
        れている正規表現の種類の確認はこの記事でおこないました。

